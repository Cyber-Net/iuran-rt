<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Bendahara</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-gray-50 pb-24"> <header class="bg-blue-600 text-white p-4 shadow-md sticky top-0 z-10">
        <h1 class="text-lg font-bold">Panel Bendahara RT</h1>
        <p class="text-xs opacity-80">Input Kas & Iuran</p>
    </header>

    <main class="p-4 max-w-md mx-auto">
        <div class="grid grid-cols-2 gap-3 mb-6">
            <div class="bg-green-100 p-3 rounded-xl border border-green-200">
                <span class="text-xs text-green-600 font-bold uppercase">Masuk</span>
                <p id="total-masuk" class="text-lg font-bold text-green-700">Rp 0</p>
            </div>
            <div class="bg-red-100 p-3 rounded-xl border border-red-200">
                <span class="text-xs text-red-600 font-bold uppercase">Keluar</span>
                <p id="total-keluar" class="text-lg font-bold text-red-700">Rp 0</p>
            </div>
        </div>

        <section id="section-iuran" class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 mb-6">
            <h3 class="font-bold text-gray-700 mb-4 flex items-center">
                <span class="mr-2">ğŸ’°</span> Catat Iuran Warga
            </h3>
            <div class="space-y-4">
                <select id="select-warga" class="w-full p-3 bg-gray-50 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none">
                    <option value="">Pilih Nama Warga...</option>
                    </select>
                <div class="grid grid-cols-2 gap-2">
                    <input type="number" id="input-bulan" placeholder="Bulan (1-12)" class="p-3 bg-gray-50 border rounded-xl outline-none">
                    <input type="number" id="input-tahun" placeholder="2024" class="p-3 bg-gray-50 border rounded-xl outline-none">
                </div>
                <input type="number" id="input-jumlah" placeholder="Jumlah (Rp)" class="w-full p-3 bg-gray-50 border rounded-xl outline-none">
                <button onclick="simpanIuran()" class="w-full bg-blue-600 text-white font-bold py-3 rounded-xl shadow-lg active:scale-95 transition">Simpan Iuran</button>
            </div>
        </section>
    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around p-3 shadow-[0_-2px_10px_rgba(0,0,0,0.05)]">
        <button class="flex flex-col items-center text-blue-600">
            <span class="text-xl">ğŸ </span>
            <span class="text-[10px] font-bold">Home</span>
        </button>
        <button class="flex flex-col items-center text-gray-400">
            <span class="text-xl">ğŸ“‰</span>
            <span class="text-[10px] font-bold">Pengeluaran</span>
        </button>
        <button class="flex flex-col items-center text-gray-400">
            <span class="text-xl">ğŸ–¨ï¸</span>
            <span class="text-[10px] font-bold">Laporan</span>
        </button>
    </nav>

    <script>
        // Masukkan API Supabase kamu di sini
        const _supabase = supabase.createClient('https://iftouptrlvsarpjmtbtt.supabase.co', 'sb_publishable_2O9yybqpEpF8qBdFXbddfg_fgVlXynp');

        async function simpanIuran() {
            const id_warga = document.getElementById('select-warga').value;
            const bulan = document.getElementById('input-bulan').value;
            const tahun = document.getElementById('input-tahun').value;
            const jumlah = document.getElementById('input-jumlah').value;

            const { data, error } = await _supabase
                .from('iuran')
                .insert([{ id_warga, bulan, tahun, jumlah }]);

            if (error) alert("Gagal simpan: " + error.message);
            else alert("Iuran berhasil dicatat!");
        }
    </script>
</body>
</html>
